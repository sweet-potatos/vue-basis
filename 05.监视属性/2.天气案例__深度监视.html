<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<script type="text/javascript" src="../js/vue.js"></script>
	</head>
	<body>
		<div id="root">
			<div>{{isHot}}</div>
			<div>今天的天气很{{weather}}</div>
			<button @click="changeWeather">切换天气</button>
			<hr />
			<div>{{numbers.a}}</div>
			<button @click="numbers.a++">a++</button>
			<div>{{numbers.b}}</div>
			<button @click="numbers.b++">b++</button>
		</div>
	</body>
	<script type="text/javascript">
		/*
		 * 深度监视:
		 * 		(1)Vue中的watch默认不检测对象内部值的改变(一层)
		 * 		(2)配置deep: true可以监测对象内部值改变(多层)
		 * 备注:
		 * 		(1)Vue自身可以监测对象内部值的改变，但Vue提供的watch默认不可以(为了效率)
		 * 		(2)使用watch时根据数据的具体结构，决定是否采用深度监视
		 */
		const vm = new Vue({
			el: '#root',
			data(){
				return {
					isHot: false,
					numbers:{
						a: 1,
						b: 2,
						c: {
							d: 100,
						},
					}
				}
			},
			computed: {
				weather: function(){
					return this.isHot ? '炎热' : '凉爽'
				}
			},
			watch: { // 计算属性也可以监视，如果监视的值不存在也不会报错只会undefined
				isHot: { // 要监视的对象
					handler: function(newVal, oldVal) { // 监视的方法
						console.log('newVal', newVal);
						console.log('oldVal', oldVal);
					},
					immediate: true // 是否立即监视
				},
				weather: {
					handler: function(newVal, oldVal) { // 监视的方法
						console.log('newVal', newVal);
						console.log('oldVal', oldVal);
					},
				},
				//监视多级结构中某个属性的变化
//				'numbers.a': {
//					handler: function(newVal, oldVal) {
//						console.log('newVal', newVal);
//						console.log('oldVal', oldVal);
//					}
//				}

				//监视多级结构中所有属性的变化
				numbers: {
					deep: true,
					handler: function(newVal, oldVal) { // 监视的方法
						console.log('newVal', newVal);
						console.log('oldVal', oldVal);
					},
				}
			},
			methods: {
				changeWeather(){
					this.isHot = !this.isHot;
				},
			}
		});
	</script>
</html>
